# SpliceTree

[![Website](https://img.shields.io/static/v1?label=Website&message=splicetree.dev&color=blue)](https://www.splicetree.dev)
[![GitHub](https://img.shields.io/static/v1?label=GitHub&message=splicetree%2Fsplicetree&logo=github)](https://github.com/michaelcocova/splicetree)
[![License](https://img.shields.io/static/v1?label=License&message=MIT&color=success)](https://github.com/michaelcocova/splicetree/blob/main/LICENSE)

## ğŸ”¹ ç®€ä»‹

SpliceTree æ˜¯ä¸€ä¸ª æ— å¤´ï¼ˆHeadlessï¼‰ã€æ¡†æ¶æ— å…³çš„æ ‘å½¢æ•°æ®è¿è¡Œæ—¶ï¼Œä¸ºç°ä»£ Web åº”ç”¨æä¾›çµæ´»ã€é«˜æ€§èƒ½çš„æ ‘ç»“æ„ç®¡ç†èƒ½åŠ›ã€‚

å®ƒåªå…³æ³¨ çŠ¶æ€ã€é€»è¾‘ä¸è¡Œä¸ºï¼Œä¸å…³å¿ƒ UI è¡¨ç°ï¼Œä½ å¯ä»¥åœ¨ Vueã€Reactã€Svelte æˆ–ä»»æ„è¿è¡Œç¯å¢ƒ ä¸­è‡ªç”±æ„å»ºä½ æƒ³è¦çš„æ ‘å½¢ç•Œé¢ â€”â€”
æ–‡ä»¶æ ‘ã€çº§è”é€‰æ‹©ã€å¯ç¼–è¾‘å¤§çº²ã€æƒé™æ ‘,èŠ‚ç‚¹æ ‘ç­‰å¤æ‚åœºæ™¯ï¼Œéƒ½å¯ä»¥ç”± SpliceTree ä½œä¸ºåº•å±‚é€»è¾‘å†…æ ¸æ”¯æ’‘ã€‚

æ ¸å¿ƒåŒ… @splicetree/core å¯ç›´æ¥ä½¿ç”¨ï¼Œå®˜æ–¹æä¾› Vue 3 é€‚é…å±‚ä¸ä¸€ç³»åˆ—æ’ä»¶ï¼Œç”¨äºå¿«é€Ÿé›†æˆåˆ°å®é™…åº”ç”¨ä¸­ï¼Œä½†æ ¸å¿ƒèƒ½åŠ›ä¸ä¾èµ–ä»»ä½•æ¡†æ¶ã€‚

æ ¸å¿ƒ API ç²¾ç®€ã€çµæ´»ï¼Œå¯ç”¨äºæ–‡ä»¶æ ‘ã€çº§è”é€‰æ‹©ç­‰å¤æ‚åœºæ™¯ï¼ŒåŒæ—¶æ”¯æŒæ’ä»¶æ‰©å±•ä¸°å¯Œèƒ½åŠ›ï¼š

- æœç´¢åŒ¹é…
- æ‹–æ‹½ç§»åŠ¨
- å‹¾é€‰ä¸åŠé€‰
- é”®ç›˜å¯¼èˆª
- æ‡’åŠ è½½å­èŠ‚ç‚¹

âœ¨ ç‰¹æ€§

- ğŸŒ è·¨æ¡†æ¶ / è·¨ç¯å¢ƒ
  - æ ¸å¿ƒå®Œå…¨æ¡†æ¶æ— å…³
  - å¯è¿è¡Œåœ¨ Vue / React / Svelte / Node / Web Worker ç­‰ç¯å¢ƒ
  - å®˜æ–¹é€‚é…å™¨ä»…ç”¨äº UI ç»‘å®šï¼Œä¸ä¾µå…¥æ ¸å¿ƒé€»è¾‘
- ğŸª¶ Headless è®¾è®¡
  - åªæä¾›æ ‘ç»“æ„ã€çŠ¶æ€å’Œè¡Œä¸º
  - UI ç»“æ„ã€æ ·å¼ã€äº¤äº’æ–¹å¼å®Œå…¨ç”±ä½ å†³å®š
  - éç»„ä»¶ï¼Œè€Œæ˜¯â€œæ ‘è¿è¡Œæ—¶ï¼ˆTree Runtimeï¼‰â€
- ğŸ”Œ æ’ä»¶ç³»ç»Ÿ
  - é€šè¿‡æ’ä»¶æ‰©å±•èƒ½åŠ›ï¼Œè€Œéå †å é…ç½®
  - å·²å†…ç½®ï¼šå‹¾é€‰ä¸åŠé€‰ã€æ‹–æ‹½ã€é”®ç›˜å¯¼èˆªã€æœç´¢ã€æ‡’åŠ è½½
  - æ’ä»¶å¯ç»„åˆã€å¯æ‹†å¸ã€ä¸æ±¡æŸ“æ ¸å¿ƒ API
- âš¡ é«˜æ€§èƒ½
  - é¢å‘æ‰å¹³æ•°æ®è®¾è®¡ï¼Œé¿å…æ·±å±‚é€’å½’
  - æ‰¹é‡æ“ä½œä¼˜åŒ–ã€ç¼“å­˜å¯è§èŠ‚ç‚¹
  - é€‚åˆå¤§è§„æ¨¡èŠ‚ç‚¹ï¼ˆä¸‡çº§ä»¥ä¸Šï¼‰åœºæ™¯
- ğŸ§© çµæ´»çš„æ•°æ®æ¨¡å‹
  - å¤©ç„¶æ”¯æŒ æ‰å¹³ç»“æ„ â†” æ ‘ç»“æ„ è½¬æ¢
  - èŠ‚ç‚¹å…³ç³»ã€å±‚çº§ã€å±•å¼€æ€ç»Ÿä¸€ç”±è¿è¡Œæ—¶ç»´æŠ¤
  - éä¾µå…¥å¼èŠ‚ç‚¹æ•°æ®ï¼Œä¸å¼ºåˆ¶ç‰¹å®š schema
- ğŸ› ï¸ ä¼˜ç§€çš„å¼€å‘ä½“éªŒ
  - å®Œæ•´ TypeScript ç±»å‹ç³»ç»Ÿ
  - æ’ä»¶ä¸èŠ‚ç‚¹èƒ½åŠ›å¯é€šè¿‡æ¨¡å—å£°æ˜å®‰å…¨æ‰©å±•
  - æ ¸å¿ƒ API ç²¾ç®€ã€å¯é¢„æµ‹ã€æ˜“æµ‹è¯•

## ğŸ”¹ æ’ä»¶ä¸é€‚é…å™¨æ€»è§ˆ

| åç§°                            | åŠŸèƒ½         | ç±»å‹   | Version                                                                                                                                                 | Downloads                                                                                                                                                     |
| ------------------------------- | ------------ | ------ | ------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `@splicetree/core`              | æ ¸å¿ƒè¿è¡Œæ—¶   | æ ¸å¿ƒ   | [![version](https://img.shields.io/npm/v/@splicetree/core.svg?label=version)](https://www.npmjs.com/package/@splicetree/core)                           | [![downloads](https://img.shields.io/npm/dm/@splicetree/core.svg)](https://npmcharts.com/compare/%40splicetree%2Fcore?minimal=true)                           |
| `@splicetree/adapter-vue`       | Vue 3 é€‚é…å±‚ | é€‚é…å™¨ | [![version](https://img.shields.io/npm/v/@splicetree/adapter-vue.svg?label=version)](https://www.npmjs.com/package/@splicetree/adapter-vue)             | [![downloads](https://img.shields.io/npm/dm/@splicetree/adapter-vue.svg)](https://npmcharts.com/compare/%40splicetree%2Fadapter-vue?minimal=true)             |
| `@splicetree/plugin-checkable`  | å‹¾é€‰ä¸åŠé€‰   | æ’ä»¶   | [![version](https://img.shields.io/npm/v/@splicetree/plugin-checkable.svg?label=version)](https://www.npmjs.com/package/@splicetree/plugin-checkable)   | [![downloads](https://img.shields.io/npm/dm/@splicetree/plugin-checkable.svg)](https://npmcharts.com/compare/%40splicetree%2Fplugin-checkable?minimal=true)   |
| `@splicetree/plugin-dnd`        | æ‹–æ‹½ç§»åŠ¨èŠ‚ç‚¹ | æ’ä»¶   | [![version](https://img.shields.io/npm/v/@splicetree/plugin-dnd.svg?label=version)](https://www.npmjs.com/package/@splicetree/plugin-dnd)               | [![downloads](https://img.shields.io/npm/dm/@splicetree/plugin-dnd.svg)](https://npmcharts.com/compare/%40splicetree%2Fplugin-dnd?minimal=true)               |
| `@splicetree/plugin-keyboard`   | é”®ç›˜å¯¼èˆª     | æ’ä»¶   | [![version](https://img.shields.io/npm/v/@splicetree/plugin-keyboard.svg?label=version)](https://www.npmjs.com/package/@splicetree/plugin-keyboard)     | [![downloads](https://img.shields.io/npm/dm/@splicetree/plugin-keyboard.svg)](https://npmcharts.com/compare/%40splicetree%2Fplugin-keyboard?minimal=true)     |
| `@splicetree/plugin-lazy-load`  | æ‡’åŠ è½½å­èŠ‚ç‚¹ | æ’ä»¶   | [![version](https://img.shields.io/npm/v/@splicetree/plugin-lazy-load.svg?label=version)](https://www.npmjs.com/package/@splicetree/plugin-lazy-load)   | [![downloads](https://img.shields.io/npm/dm/@splicetree/plugin-lazy-load.svg)](https://npmcharts.com/compare/%40splicetree%2Fplugin-lazy-load?minimal=true)   |
| `@splicetree/plugin-search`     | æœç´¢åŒ¹é…     | æ’ä»¶   | [![version](https://img.shields.io/npm/v/@splicetree/plugin-search.svg?label=version)](https://www.npmjs.com/package/@splicetree/plugin-search)         | [![downloads](https://img.shields.io/npm/dm/@splicetree/plugin-search.svg)](https://npmcharts.com/compare/%40splicetree%2Fplugin-search?minimal=true)         |
| `@splicetree/plugin-pointer`    | æŒ‡é’ˆè¾“å…¥     | æ’ä»¶   | [![version](https://img.shields.io/npm/v/@splicetree/plugin-pointer.svg?label=version)](https://www.npmjs.com/package/@splicetree/plugin-pointer)       | [![downloads](https://img.shields.io/npm/dm/@splicetree/plugin-pointer.svg)](https://npmcharts.com/compare/%40splicetree%2Fplugin-pointer?minimal=true)       |
| `@splicetree/plugin-selectable` | é€‰æ‹©ä¸æ¿€æ´»   | æ’ä»¶   | [![version](https://img.shields.io/npm/v/@splicetree/plugin-selectable.svg?label=version)](https://www.npmjs.com/package/@splicetree/plugin-selectable) | [![downloads](https://img.shields.io/npm/dm/@splicetree/plugin-selectable.svg)](https://npmcharts.com/compare/%40splicetree%2Fplugin-selectable?minimal=true) |

> æ‰€æœ‰æ’ä»¶å¯æŒ‰éœ€ç»„åˆä½¿ç”¨ï¼Œé€‚é…å™¨ä»…ä¸ºæ–¹ä¾¿ç»‘å®š UI ç»„ä»¶ï¼Œæ ¸å¿ƒåŠŸèƒ½ä¸ä¾èµ–ä»»ä½•æ¡†æ¶ã€‚

## ğŸ”¹ å®‰è£…

```bash
pnpm add @splicetree/core
# å®‰è£…æ’ä»¶å’Œé€‚é…å™¨ï¼ˆå¯é€‰ï¼‰
pnpm add @splicetree/plugin-checkable @splicetree/plugin-dnd @splicetree/plugin-keyboard @splicetree/plugin-lazy-load @splicetree/plugin-search @splicetree/adapter-vue
```

### ğŸ”¹ å¿«é€Ÿå¼€å§‹ï¼ˆæ ¸å¿ƒï¼‰

ä½¿ç”¨æ ¸å¿ƒ API æ„å»ºæ ‘ï¼Œå¹¶é€šè¿‡ configuration å®šä¹‰é»˜è®¤å±•å¼€ä¸æ’ä»¶é…ç½®

```ts
import { createSpliceTree } from '@splicetree/core'
import checkable from '@splicetree/plugin-checkable'
import pointer from '@splicetree/plugin-pointer'
import selectable from '@splicetree/plugin-selectable'

const data = [
  { id: 'a', label: 'èŠ‚ç‚¹ A' },
  { id: 'b', label: 'èŠ‚ç‚¹ B', parent: 'a' }
]

const tree = createSpliceTree(data, {
  plugins: [checkable, pointer, selectable],
  configuration: {
    defaultExpanded: ['a'],
    autoExpandParent: true,
    checkable: {
      defaultChecked: ['b'],
      triggerByClick: false,
    },
    selectable: {
      multiple: true,
      defaultSelected: [],
    },
  },
})

// éå†èŠ‚ç‚¹
for (const node of tree.items()) {
  console.log(node.id, node.level, node.isExpanded(), node.isSelected?.())
}
```

> æ ¸å¿ƒ API ä¸æ’ä»¶å¯ç›´æ¥ä½¿ç”¨åœ¨ä»»ä½•ç¯å¢ƒï¼Œé€‚é…å™¨ä»…æä¾›ä¾¿åˆ©ç»‘å®šã€‚

â¸»

### ğŸ”¹ Vue 3 é›†æˆ

é€šè¿‡é€‚é…å™¨å°†æ ¸å¿ƒè¿è¡Œæ—¶ä¸ Vue ç»‘å®šï¼Œitems ä»¥ shallowRef æš´éœ²ï¼›ç‚¹å‡»èŠ‚ç‚¹æ—¶è°ƒç”¨ inputNodeClick äº§ç”Ÿè¯­ä¹‰äº‹ä»¶ã€‚

```ts
import { useSpliceTree } from '@splicetree/adapter-vue'
import keyboard from '@splicetree/plugin-keyboard'
import pointer from '@splicetree/plugin-pointer'
import selectable from '@splicetree/plugin-selectable'
import { ref } from 'vue'

const data = ref([
  { id: 'a', label: 'èŠ‚ç‚¹ A' },
  { id: 'b', label: 'èŠ‚ç‚¹ B', parent: 'a' },
])

const tree = useSpliceTree(data, {
  plugins: [pointer, selectable, keyboard],
  configuration: {
    defaultExpanded: ['a'],
    autoExpandParent: true,
    selectable: { multiple: true },
    keyboard: { autoListen: true, target: '.keyboard-wrap' },
  },
})

// åœ¨æ¨¡æ¿ä¸­ï¼š
// <div class="keyboard-wrap">
//   <div v-for="n in tree.items" :key="n.id" @click="tree.inputNodeClick(n.id, $event)">
//     {{ n.original.label }}
//   </div>
// </div>
```

â¸»

### ğŸ”¹ CLI ä½¿ç”¨

æ ¹ç›®å½•æä¾›äº¤äº’å¼ CLIï¼Œç»Ÿä¸€è¿›è¡Œæ„å»ºã€ç‰ˆæœ¬ä¸å‘å¸ƒç­‰å·¥ä½œï¼š

- è¿è¡Œï¼špnpm run cli
- ä¸»èœå•ï¼š
  - Build
  - Dev
  - Version Packages
  - Publishï¼ˆäº¤äº’å¼å‘å¸ƒï¼Œæ”¯æŒå¤šé€‰ï¼Œé»˜è®¤å…¨é€‰ï¼‰
  - Clean
  - Changelog
  - Lint
- å‘å¸ƒæµç¨‹è¦ç‚¹ï¼š
  - å¯é€‰æ‹©â€œæ˜¯å¦æ‰§è¡Œ version-packagesï¼ˆé»˜è®¤å¦ï¼‰â€ï¼Œé€‰æ‹©â€œæ˜¯â€å°†æ‰§è¡Œ changeset version
  - æ”¯æŒè®¾ç½® NPM_TOKENï¼ˆå¯ç•™ç©ºï¼Œè‡ªåŠ¨è¯»å– .env/.env.localï¼‰
  - æ”¯æŒé€‰æ‹©å‘å¸ƒåˆ°æœ¬åœ° Verdaccioï¼ˆé»˜è®¤ http://localhost:4873/ï¼‰æˆ– npm
  - å¼ºåˆ¶åœ¨æ­£å¼å‘å¸ƒå‰æ‰§è¡Œä¸€æ¬¡ dry-run
  - é€’å½’ -r å‘å¸ƒå¹¶æŒ‰æ‰€é€‰åŒ…æ·»åŠ  --filter
  - git-checks é»˜è®¤å…³é—­ï¼Œå¯åœ¨äº¤äº’ä¸­å¼€å¯

â¸»

### ğŸ”¹ å‘å¸ƒä¸å˜æ›´è®°å½•

- ç‰ˆæœ¬å˜æ›´ï¼špnpm run version-packages
- æ ¹ç›®å½•èšåˆ Changelogï¼špnpm run changelog:aggregateï¼ˆè„šæœ¬ä½ç½®è§ scripts/aggregate-changeset.jsï¼‰
- äº¤äº’å¼å‘å¸ƒï¼špnpm run cli â†’ é€‰æ‹© Publish

â¸»

### ğŸ”¹ å®˜æ–¹æ–‡æ¡£

å®Œæ•´æ–‡æ¡£ã€ç¤ºä¾‹å’Œ API è¯´æ˜è¯·è®¿é—®ï¼šhttps://www.splicetree.devï¿¼

### ğŸ”¹ License

[MIT](./LICENSE)
